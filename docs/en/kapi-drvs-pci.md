# 02.05 drvs/PCI.h
This header exposes functions to work with the PCI bus. It currently only supports finding SATA devices.
## Members
### PCI_CONFIG_ADDR
```c
#define PCI_CONFIG_ADDR 0xCF8
```
- Purpose: The Device address used to configure the PCI bus
### PCI_CONFIG_DATA
```c
#define PCI_CONFIG_DATA 0xCFC
```
- Purpose: The Device address used to receive data from the PCI bus

### uint32_t pci_get_addr(uint8_t, uint8_t, uint8_t, uint8_t)
```c
uint32_t pci_get_addr(uint8_t bus, uint8_t slot, uint8_t func, uint8_t offset)
```
- Purpose: Creates an address for the PCI bus to load Data from/to
- Parameters:
    - ```uint8_t bus```: The bus number
    - ```uint8_t slot```: The slot number on that bus
    - ```uint8_t func```: The function number for multifunction devices
    - ```uint8_t offset```: The offset from the base address generated by the above parameters
- Return Value: A PCI Bus address
### uint16_t pci_read_word(uint8_t, uint8_t, uint8_t, uint8_t)
```c
uint16_t pci_read_word(uint8_t bus, uint8_t slot, uint8_t func, uint8_t offset)
```
- Purpose: Reads a word from the specified PCI device
- Parameters:
    - ```uint8_t bus```: The bus number
    - ```uint8_t slot```: The slot number on that bus
    - ```uint8_t func```: The function number for multifunction devices
    - ```uint8_t offset```: The offset from the base address generated by the above parameters
- Return Value: The received 16-Bit word
### uint8_t pci_read_byte(uint8_t, uint8_t, uint8_t, uint8_t)
```c
uint8_t pci_read_byte(uint8_t bus, uint8_t slot, uint8_t func, uint8_t offset)
```
- Purpose: Reads a byte from the specified PCI device
- Parameters:
    - ```uint8_t bus```: The bus number
    - ```uint8_t slot```: The slot number on that bus
    - ```uint8_t func```: The function number for multifunction devices
    - ```uint8_t offset```: The offset from the base address generated by the above parameters
- Return Value: The received byte
### uint32_t pci_read_dw(uint8_t, uint8_t, uint8_t, uint8_t)
```c
uint32_t pci_read_dw(uint8_t bus, uint8_t slot, uint8_t func, uint8_t offset)
```
- Purpose: Reads a double word from the specified PCI device
- Parameters:
    - ```uint8_t bus```: The bus number
    - ```uint8_t slot```: The slot number on that bus
    - ```uint8_t func```: The function number for multifunction devices
    - ```uint8_t offset```: The offset from the base address generated by the above parameters
- Return Value: The received double word
### uint8_t pci_valid_dev(uint8_t, uint8_t)
```c
uint8_t pci_valid_dev(uint8_t bus, uint8_t dev)
```
- Purpose: Checks if a device is valid and returns its functions
- Parameters:
    - ```uint8_t bus```: The bus number
    - ```uint8_t dev```: The device to check
- Return Value: 0 if the device is invalid; if the device is valid it has 1 for every return_value[valid_func]
### uint32_t pci_find_ahci()
```c
uint32_t pci_find_ahci()
```
- Purpose: Searches the PCI bus for an AHCI controller
- Parameters: None
- Return Value: The AHCI Base Memory Register (ABAR)